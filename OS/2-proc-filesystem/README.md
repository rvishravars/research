# 2-proc-filesystem

This directory contains Linux kernel modules that demonstrate how to create and interact with custom entries in the `/proc` filesystem.

## Files

- `proc.c`:  
  Kernel module that creates a custom entry under `/proc`. When this entry is read from user space, the module provides information or output as defined in its implementation.

- `Makefile`:  
  Builds the kernel module.

- `test.sh`:  
  Script to build, load, and test the module, including reading from the `/proc` entry and displaying its output.

## Functionality

The kernel module registers a new file in the `/proc` filesystem (typically `/proc/driver/my_proc/ro_info`).  
When a user reads this file (e.g., using `cat`), the module's read handler is invoked, and it returns custom data to user space.  
This mechanism is commonly used for exposing kernel information, statistics, or configuration interfaces to user space.

## Usage

### Building the Module

```sh
make
```

### Loading the Module

```sh
sudo insmod proc.ko
```

### Interacting with the `/proc` Entry

After loading, read the custom `/proc` entry:

```sh
cat /proc/proc
```

You should see output generated by the kernel module.

### Unloading the Module

```sh
sudo rmmod proc
```

### Running the Test Script

```sh
./test.sh
```

This script automates the build, load, read, and unload steps.

## Tested Environment

This code was tested under:

```
Linux raspberrypi 6.12.38-v7+ #1 SMP Sun Jul 20 16:40:04 NZST 2025 armv7l GNU/Linux
```

## Notes

- The `/proc` entry is created when the module is loaded and removed when the module is unloaded.
- Reading from the `/proc` entry triggers the module's read handler, which returns the desired output.
- Useful for learning about kernel-to-user communication and dynamic kernel data reporting.

## License

See [../LICENSE](../LICENSE) for